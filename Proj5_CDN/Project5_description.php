<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Project 5: CS 5700 Fundamentals of Computer Networking: David Choffnes, Ph.D.</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Homepage for David Choffnes, Ph.D., Assistant Professor in Computer Science at Northeastern University">
<meta name="author" content="">
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2830907-1']);
  _gaq.push(['_setDomainName', 'choffnes.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>



<!-- Le styles -->
<link href="http://david.choffnes.com/bootstrap/css/bootstrap.css" rel="stylesheet">
<style>
body {
    padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
	padding-bottom: 60px;
}

/* Custom container */
.navbar {
margin: 0 auto;
    max-width: 800px;
}
.container-narrow {
margin: 0 auto;
    max-width: 800px;
}
.container-narrow > hr {
margin: 30px 0;
}
.navbar-footer-grey {
margin: 0 auto;
    max-width: 800px;
	text-align: center;
}
.navbar .btn-navbar {
	float: left;
}
.nav-red {
color: red;
}
.floatrightconf{
float:right;
position: relative;
right: -120px;
margin-left:-100px;
color:#6633CC;
}
.pub {
  width: 675px;
}
.pub > li {
  width: 650px;
}
</style>
<link href="http://david.choffnes.com/bootstrap/css/bootstrap-responsive.css" rel="stylesheet">


<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9]>
<script src="http://david.choffnes.com/bootstrap/js/html5shiv.js"></script>
<![endif]-->

<!-- Fav and touch icons -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://david.choffnes.com/bootstrap/ico/apple-touch-icon-144-precomposed.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://david.choffnes.com/bootstrap/ico/apple-touch-icon-114-precomposed.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://david.choffnes.com/bootstrap/ico/apple-touch-icon-72-precomposed.png">
<link rel="apple-touch-icon-precomposed" href="bootstrap/ico/apple-touch-icon-57-precomposed.png">
<link rel="shortcut icon" href="http://david.choffnes.com/bootstrap/ico/favicon.png">
</head>

<body data-spy="scroll" data-target=".classnavbar">
<div class="navbar navbar-inverse navbar-fixed-top">

        
<div class="navbar-inner">
<div class="container-fluid">
<button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
<center><span>MENU &nbsp;</span><div style="display: inline-block">
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span></div></center>
</button>
<div class="nav-collapse collapse">
<ul class="nav">
<li ><a class="brand" href="http://david.choffnes.com/">David Choffnes</a></li>



<li class="dropdown ">
<a id="drop1" href="#" role="button" class="dropdown-toggle" data-toggle="dropdown">RESEARCH<b class="caret"></b></a>
<ul class="dropdown-menu" role="menu" aria-labelledby="drop1">
<li role="presentation"><a id="item1" role="menuitem" tabindex="-1" href="http://david.choffnes.com/projects.php">Projects</a></li>
<li role="presentation"><a role="menuitem" tabindex="-1" href="http://david.choffnes.com/pubs.php">Publications</a></li>
<li role="presentation"><a role="menuitem" tabindex="-1" href="http://david.choffnes.com/vision.php">Vision</a></li>
<li role="presentation"><a role="menuitem" tabindex="-1" href="http://david.choffnes.com/collaborators.php">Collaborators</a></li>
<li role="presentation"><a role="menuitem" tabindex="-1" href="http://david.choffnes.com/software.php">Software</a></li>
<li role="presentation"><a role="menuitem" tabindex="-1" href="http://david.choffnes.com/support.php">Support</a></li>
</ul>
</li>

<li class="dropdown ">
<a id="drop1" href="#" role="button" class="dropdown-toggle" data-toggle="dropdown">TEACHING<b class="caret"></b></a>
<ul class="dropdown-menu" role="menu" aria-labelledby="drop1">
<li role="presentation"><a role="menuitem" tabindex="-1" href="http://david.choffnes.com/teaching.php#current">Current</a></li>
<li role="presentation"><a role="menuitem" tabindex="-1" href="http://david.choffnes.com/teaching.php#past">Past</a></li>
</ul>
</li>

<li class="dropdown ">
<a id="drop1" href="#" role="button" class="dropdown-toggle" data-toggle="dropdown">ABOUT<b class="caret"></b></a>
<ul class="dropdown-menu" role="menu" aria-labelledby="drop1">
<li role="presentation"><a role="menuitem" tabindex="-1" href="http://david.choffnes.com/about.php">Brief</a></li>
<li role="presentation"><a role="menuitem" tabindex="-1" href="http://david.choffnes.com/about.php#cv">CV</a></li>
<li role="presentation"><a role="menuitem" tabindex="-1" href="http://david.choffnes.com/rec.php">Extracurricular</a></li>
<li role="presentation"><a role="menuitem" tabindex="-1" href="http://david.choffnes.com/news.php">News</a></li>
</ul>

</li>

<li ><a href="press.php">PRESS</a></li>

<li class="dropdown ">
<a id="drop1" href="#" role="button" class="dropdown-toggle" data-toggle="dropdown"><span style="color:red">JOIN</span><b class="caret"></b></a>
<ul class="dropdown-menu" role="menu" aria-labelledby="drop1">
<li role="presentation"><a role="menuitem" tabindex="-1" href="http://david.choffnes.com/join.php#grad">Graduate</a></li>
<li role="presentation"><a role="menuitem" tabindex="-1" href="http://david.choffnes.com/join.php#ugrad">Undergraduate</a></li>
</ul>
</li>

<li ><a href="contact.php">CONTACT</a></li>

</ul>
</div><!--/.nav-collapse -->
</div>
</div>
</div>



<div class="container-narrow">

<div id="content">

<div class="section_header">CS 4700 / CS 5700 - Network Fundamentals</div>
<h2>Project 5: Roll Your Own CDN</h2>
<p>
<b>This project is due at 11:59pm on April 21, 2014. The milestone is due at 11:59pm on April 7, 2014.</b>
</p><p>
<h2>Description</h2>
By now, you have learned that most of the content we consume over the Interent is served 
by content delivery/distribution networks (CDNs). In this project, you will create the building 
    blocks of a CDN.  Unlike previous projects, a portion of your grade in this project will come from
how your code performs compared to the solutions of your classmates, i.e. this assignment
is a competition.
</p><p>
CDNs consist of 1) a large number of servers geographically distributed worldwide; 2) a system 
    that maps clients to "good" replica servers and 3) a system that determines those mappings. In 
    this project, you will implement the basic functionality in each of these areas. Thanks to 
    generous support from Amazon EC2, you will build a CDN that uses EC2 sites as replica servers. Your 
    performance will be compared to two baselines: origin (a single server in a single EC2 location) and 
    random server selection. You should do better than both. 
</p><p>
<!----------------->
<h2>Project Requirements</h2>
You must implement a CDN using the following features. First, you will use DNS redirection to send clients 
    to the replica server with the fastest response time. Second, you will write a simple Web server that 
    returns content requested by clients. Third, you will implement a system that uses information about 
    network performance, load on servers, and cached data at servers to determine the best replica server.  
    Performance will be measured in terms of how long it takes to download a piece of content. Similar to 
    most Web sites, most content will be small in terms of bytes.
</p><p>
I will test your code using simple clients that 1) ask your DNS server for the IP address of 
    <i>cs5700cdn.example.com</i> and 2) uses an HTTP get to fetch a file from that address. These clients 
    will run from servers located all over the world. The request frequency for each piece of content will 
    follow a <a href="http://en.wikipedia.org/wiki/Zipf's_law">Zipf distribution</a>, and the size of content at the origin server is much larger than the 
    size of your cache on each replica server. In other words, you must implement a cache replacement 
    strategy at each replica server because you can't fit all the requested content at each cache. If your replica 
    server receives a request for content not in its cache, the server must fetch it from the origin and 
    return that to the client.
</p><p>
When determining the replica server to use for each client request, you should determine which one will give 
    the best time-to-completion (TTC) for downloading a Web page. This can depend on the network latency, 
    loss, available bandwidth and load on the server. You can choose any technique(s) you want for estimating 
    these properties, but online (i.e., active measurement) techniques are the most likely to suceed if implmented properly.
</p><p>
<div class="alert alert-block">
<h4><i class="icon-warning-sign"></i>Important!</h4>
This project requires you to access EC2 nodes and use them as content caches. For this project, I have 
    made a large corpus of public-domain data available (i.e., Wikipedia). <b>Do not use any other content 
    in your system, particulary copyrighted work.</b> Further, you cannot use accounts on EC2 for any purpose 
    other than running your replica server code. <b>If we find you using our EC2 VMs for any other purpose, your account will 
    be deleted and you will receive a zero on this project.</b>
    </div>
</p><p>
<h2>Your Programs</h2>
For this project, you will submit three independent pieces: a DNS server, an HTTP server with cache management, 
    and code that manages the mappings between clients and replicas.
</p><p>
The DNS server will be called using:
    </p><p><pre>./dnsserver -p &lt;port&gt; -n &lt;name&gt;</pre>
</p>
<p>
where <i>port</i> is the port number that your DNS server will bind to and <i>name</i> is the CDN-specific name 
    that your server translates to an IP. In this case, I will use <i>cs5700cdn.example.com</i>. The DNS servers 
    must run on <b>cs5700cdnproject.ccs.neu.edu</b>. You must run this server on a high-numbered port (40000-65535). 
<b>You should assume that your HTTP server will run on the same port that you specify here.</b></p> 

<p>Note that unlike in a traditional CDN, I will be requesting name translations 
    directly from the same host as the Web client. Thus you do not have to correct for the distance between Web 
    clients and their DNS servers. <b>Note that the server will be rebooted every night, so you cannot rely on long-running code on 
    this server.</b>
</p><p>
The HTTP server will be called using 
</p><p>
<pre>./httpserver -p &lt;port&gt; -o &lt;origin&gt;</pre>

where <i>port</i> is the port that your HTTP server will bind to and <i>origin</i> is the name of the origin server for your CDN. This 
    code is responsible for delivering the requested content to clients. It may do so by fetching uncached content for the origin, or 
    a local cache of Web pages. Disk quotas have been set such that the size of the cache on each replica server is much less than the 
    size of all the requestable content. Your server is also responsible for managing the cache of Web pages on the host where it runs. Again, note 
that you must run this web server on a high-numbered port (40000-65535) for testing. 
</p><p>
You may execute other measurement and mapping code on the replica servers and DNS server. To facilitate 
    this, you should provide a <i>deployCDN</i>, a <i>runCDN</i> script and a <i>stopCDN</i> script. For example, the <i>deployCDN</i> script 
    will copy code to an EC2 instance and run a Makefile. The <i>runCDN</i> script will cause the server to run. 
    </p>
<p>
    Your scripts will be called as follows:
<pre>./[deploy|run|stop]CDN -p &lt;port&gt; -o &lt;origin&gt; -n &lt;name&gt; -u &lt;username&gt; -i &lt;keyfile&gt;</pre>

where <i>port</i>, <i>origin</i> and <i>name</i> are the same as above, <i>username</i> is the account name you use for logging in and 
<i>keyfile</i> is the path to the private key you use for logging into nodes. Your scripts should use the last two arguments as follows:

<pre>ssh -i <i>keyfile</i> <i>username</i>@&lt;some EC2 server&gt; ...</pre>

</p>


<h2>Testing Your Code</h2>
To test your code, you will be given access to each of the EC2 VMs. The list of these VMs is located at: 
    <pre>/course/cs5700sp14/ec2-hosts.txt</pre> In addition, we will set up <i>DNS lookup beacons</i> and 
    <i>HTTP client beacons</i> that periodically perform DNS lookups and fetch content from each 
    VM on a range of ports. By instantiating a Web server on a port in that range, you will periodically 
    receive requests for name translations and Web pages. You may also use CCIS servers, EC2 servers and 
    any other servers you have available to test the quality of your mappings.
</p>
    <p>To perform a DNS lookup, use the <i>dig</i> tool. For example, you would want to call:</p>
    <p><pre>dig @[your DNS server IP] -p [your port]</pre> </p>
    <p>To fetch and time Web page downloads, you can use:</p>
    <p><pre>wget http://[your server name]:[your port name]/[path to content]</pre></p>
    <p>Preceding this call with <i>time</i> will allow you dettermine how long a download takes to complete.</p>
    <p>
Your grade will in large part depend on the time it takes to download content from the server you send 
    my client to. Because you are download text Web pages, you can expect the flows to be short so latency and loss are 
    likely to dominate your performance. You should develop a strategy for identifying the best server for a client 
        and test it by comparing with performance from other EC2 sites.
</p>
<h2>Tips and Tricks</h2>
    <p>
To locate the server with the lowest latency, you can use active measurements, passive measurements and/or 
    exogenous information such IP geolocations. <b>If you choose to use active measurements, you must limit 
    your measurement rate to no more than 1 probe per second. I suggest using scamper, which is already installed on the EC2 machines. </b>
</p><p>
You can deploy code without interactive passwords by using SSH key-based authentication. You will be expected 
    to use this technique to execute your <i>deployCDN</i> and <i>runCDN</i> scripts.
</p><p>
Your CDN can be terminated at any time. Make sure you use persistent storage (i.e., files on disk) to maintain 
    information about content cached at various nodes and any information you need to map clients to servers. 
</p><p>
<h2>Grading</h2>
Your grade in this project will be composed by the following components:
<ul>
<li>5 points - Implementation of a DNS server that dynamically returns IP addresses based on your mapping code.</li>
<li>5 points - Implementation of a HTTP server that efficiently fetches content from the origin on-demand and optimizes the cache hit ratio.</li>
<li>5 points - Implementation of a system that maps IPs to nearby replica servers.</li>
<li>3 points - Performance in the TopCDN competition</li>
<li>2 points - A short (no more than 2 pages) report describing the design decisions you made, how your evaluated their 
    effectiveness and what you would do with more time. Include this in the README file.</li>
</ul>
The final competition will be held on April 22. We will test each CDN against two baselines: origin and 
    random server selection. Those that do better than random and origin will get 1 point. The top 1/3 scores 
    will earn onother 2 points (for a total of 3), and the next 1/3 will earn an additional point (for a total of 2). 
Students may use slip days
and turn in the assignment late; however late assignments will not be eligible for TopCDN points. 
</p><p>
<h2>Extra Credit</h2>
The top ranked team in the TopCDN project on April 22 will earn 3 bonus points! :)
</p><p>
<h2>Registering Your Project</h2>
Before turning in your project, you and your partner(s) must register your group. To register yourself
in a group, execute the following script:
<pre>$ /course/cs5700sp14/bin/register project5 [team name]</pre>
This will either report back success or will give you an error message.  If you have trouble registering,
please contact the course staff. <b>You and your partner(s) must all run this script with the same
[team name]</b>. This is how we know you are part of the same group.
</p>

<h2>Submitting Your Milestone</h2>
<p>
There is a milestone for this project. At two weeks in, you need to turn in working DNS servers and 
    caching HTTP clients. The remainder of your time will be spent on the CDN logic that links them together. This is due 
    on <b>April 7, 2014 at 11:59:59pm</b>:
<ul>
    <li>A Makefile that compiles your code.</li>
    <li>An httpserver executable</li>
    <li>A dnsserver executable</li>
    
<li>A plain-text (no Word or PDF) README file. In this file, you should briefly describe your high-level
approach, what specific performance enhancing techniques you implemented, and any challenges you faced.</li>
</ul>
Your README, Makefile, source code, etc. should all be placed in a directory. You submit
your project by running the turn-in script as follows:
<pre>$ /course/cs5700sp14/bin/turnin project5-milestone [project directory]</pre>
[project directory] is the name of the directory with your submission. The script will print out every
file that you are submitting, so make sure that it prints out all of the files you wish to submit!

<h2>Submitting Your Final Project</h2>
<p>
To turn-in your final project, you should submit your (thoroughly documented) code along with three other files:
<ul>
    <li>A Makefile that compiles your code.</li>
    <li>An httpserver executable</li>
    <li>A dnsserver executable</li>
    <li>A deployCDN script</li>
    <li>A runCDN script</li>
    <li>A stopCDN script</li>
    
<li>A plain-text (no Word or PDF) README file. In this file, you should briefly describe your high-level
approach, what specific performance enhancing techniques you implemented, and any challenges you faced.</li>
</ul>
Your README, Makefile, source code, etc. should all be placed in a directory. You submit
your project by running the turn-in script as follows:
<pre>$ /course/cs5700sp14/bin/turnin project5 [project directory]</pre>
[project directory] is the name of the directory with your submission. The script will print out every
file that you are submitting, so make sure that it prints out all of the files you wish to submit!</p>
<p>Do <b>not</b> turn in files larger than 10MB, as these will be rejected.</p>
<p>
<b>Only one group member needs to submit your project.</b> Your group may submit as many times as you
wish; only the time of the last submission will determine whether your assignment is late.
</p>

    
    
    </div> <!-- /container -->
    
    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="http://david.choffnes.com/bootstrap/js/bootstrap.js"></script>

 <script>
      !function ($) {
        $(function(){
          // Fix for dropdowns on mobile devices
          $('body').on('touchstart.dropdown', '.dropdown-menu', function (e) { 
              e.stopPropagation(); 
          });
          $(document).on('click','.dropdown-menu a',function(){
              document.location = $(this).attr('href');
          });
        })
      }(window.jQuery)
    </script>

    <!--script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
    </script>
    <script type="text/javascript">
    _uacct = "UA-2830907-1";
    urchinTracker();
    </script-->
    </body>
    <div class="navbar-footer-grey">
    <hr>
    <p>David Choffnes, Assistant Professor, College of Computer &amp; Information Science, Northeastern University. &copy; 2015<br>
    Last updated
    <!-- #BeginDate format:Am1 -->April 20, 2014<!-- #EndDate -->.
    </p>
    </div>
    </html>
